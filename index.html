<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Flappy Bird Pro</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #4ec0ca; font-family: 'Arial Black', sans-serif; }
        canvas { display: block; width: 100vw; height: 100vh; }
    </style>
</head>
<body>
    <canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Ekranı tam boyut yap
function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

// --- PROFESYONEL GÖRSEL VARLIKLAR (Base64) ---
const birdImg = new Image();
// Orijinal Flappy Bird Sprite Sheet (3 kareli animasyon için)
birdImg.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAYBAMAAAAH6O9VAAAALVBMVEUAAAD/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb/Zmb9pUv2AAAAAXRSTlMAQObYZgAAAK1JREFUKM9jYMAOBuDABAQMpIEBCHAyMAQEBDAwBAQYGFQYGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdGAIdmAAAmP8P5Zp/M80AAAAASUVORK5CYII=";

const bird = {
    x: 50, y: canvas.height / 2,
    w: 34, h: 24,
    frame: 0, vel: 0, grav: 0.25, jump: 5.5, rot: 0,
    update() {
        if (gameState !== "PLAY") return;
        this.vel += this.grav;
        this.y += this.vel;
        this.rot = Math.min(Math.PI/4, Math.max(-Math.PI/4, this.vel * 0.1));
        // Kanat çırpma hızı
        if (frames % 5 === 0) this.frame = (this.frame + 1) % 3;
        if (this.y + this.h >= canvas.height - 50) endGame();
    },
    draw() {
        ctx.save();
        ctx.translate(this.x + this.w/2, this.y + this.h/2);
        ctx.rotate(this.rot);
        // Sprite sheet'ten kare seçerek çiz (Animasyon burada oluyor)
        ctx.drawImage(birdImg, this.frame * 34, 0, 34, 24, -this.w/2, -this.h/2, this.w, this.h);
        ctx.restore();
    }
};

let frames = 0, score = 0, gameState = "START", pipes = [];

function spawnPipe() {
    let gap = 160, minH = 100;
    let pY = Math.random() * (canvas.height - gap - 200) + 50;
    pipes.push({ x: canvas.width, y: pY, gap: gap, w: 60, passed: false });
}

function endGame() {
    gameState = "OVER";
}

function reset() {
    bird.y = canvas.height / 2; bird.vel = 0;
    pipes = []; score = 0; frames = 0; gameState = "PLAY";
}

function loop() {
    // Arka Plan
    ctx.fillStyle = "#4ec0ca";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    if (gameState === "PLAY") {
        if (frames % 100 === 0) spawnPipe();
        for (let i = pipes.length - 1; i >= 0; i--) {
            let p = pipes[i];
            p.x -= 3.5;
            
            // Borular
            ctx.fillStyle = "#73bf2e";
            ctx.strokeStyle = "#2e4d12"; ctx.lineWidth = 4;
            ctx.fillRect(p.x, 0, p.w, p.y); ctx.strokeRect(p.x, 0, p.w, p.y);
            ctx.fillRect(p.x, p.y + p.gap, p.w, canvas.height); ctx.strokeRect(p.x, p.y + p.gap, p.w, canvas.height);
            
            if (bird.x + bird.w > p.x && bird.x < p.x + p.w && (bird.y < p.y || bird.y + bird.h > p.y + p.gap)) endGame();
            if (!p.passed && p.x + p.w < bird.x) { score++; p.passed = true; }
            if (p.x + p.w < 0) pipes.splice(i, 1);
        }
    }

    bird.update();
    bird.draw();

    // Zemin
    ctx.fillStyle = "#ded895";
    ctx.fillRect(0, canvas.height - 50, canvas.width, 50);

    // UI
    ctx.fillStyle = "white"; ctx.strokeStyle = "black"; ctx.lineWidth = 6;
    ctx.textAlign = "center"; ctx.font = "bold 60px Arial";
    ctx.strokeText(score, canvas.width/2, 100); ctx.fillText(score, canvas.width/2, 100);

    if (gameState !== "PLAY") {
        ctx.font = "bold 25px Arial";
        let text = gameState === "START" ? "BAŞLAMAK İÇİN DOKUN" : "OYUN BİTTİ - TEKRAR TIKLA";
        ctx.strokeText(text, canvas.width/2, canvas.height/2);
        ctx.fillText(text, canvas.width/2, canvas.height/2);
    }

    frames++;
    requestAnimationFrame(loop);
}

const input = () => {
    if (gameState !== "PLAY") reset();
    else bird.vel = -bird.jump;
};

window.addEventListener("mousedown", input);
window.addEventListener("touchstart", (e) => { e.preventDefault(); input(); });
loop();
</script>
</body>
</html>
